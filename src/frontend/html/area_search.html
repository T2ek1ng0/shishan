<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>æŒ‰åœ°åŒºæ£€ç´¢</title>
    <link rel="stylesheet" href="../css/common.css">
</head>
<body>
    <div class="container">
        <button class="back-btn" onclick="goBack()" title="è¿”å›">â¬…</button>
        
        <h3>ğŸŒ åœ°åŒºæ£€ç´¢</h3>
        <div class="form-group">
            <input id="area_input" type="text" placeholder="è¯·è¾“å…¥è¦æ£€ç´¢çš„åœ°åŒºï¼ˆå¦‚ï¼šåŒ—äº¬å¥¥æ—åŒ¹å…‹æ£®æ—å…¬å›­ï¼‰">
        </div>
        <div class="text-center">
            <button onclick="area_searcher()">ğŸ” å¼€å§‹æœç´¢</button>
        </div>
        
        <div id="area_result" class="mt-20" style="white-space: pre-wrap; line-height: 1.6; background: #f9f9f9; padding: 15px; border-radius: 5px; min-height: 100px;"></div>
    </div>

    <script>
         const { ipcRenderer } = require('electron')
         window.ipcRenderer = ipcRenderer

         async function area_searcher() {
             const area = document.getElementById("area_input").value.trim()
             const resultElement = document.getElementById("area_result")

             if (!area) {
                 resultElement.innerText = "è¯·è¾“å…¥è¦æ£€ç´¢çš„åœ°åŒº"
                 return
             }

             // æ˜¾ç¤ºåŠ è½½æç¤º
             resultElement.innerText = "æ­£åœ¨æ£€ç´¢ä¸­ï¼Œè¯·ç¨å€™..."

             try {
                 const result = await ipcRenderer.invoke('area_searcher', area)
                 resultElement.innerText = result
             } catch (err) {
                 resultElement.innerText = `è°ƒç”¨å‡ºé”™ï¼š${err}`
             }
         }

         async function goBack() {
             await ipcRenderer.invoke('search_bird_newpage')
         }
    </script>
</body>
</html>