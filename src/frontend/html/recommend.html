<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>ä»Šæ—¥æ¨è</title>
    <link rel="stylesheet" href="../css/common.css">
</head>
<body>
    <div class="container">
        
        <h2>ğŸ“… ä»Šæ—¥æ‰“é¸Ÿæ¨è</h2>
        <div class="form-group">
            <input id="area_input" type="text" placeholder="è¯·è¾“å…¥ä½ æ‰€åœ¨çš„åœ°åŒºï¼ˆå¦‚ï¼šæ­å·è¥¿æ¹–ï¼‰">
        </div>
        <div class="text-center">
            <button onclick="recommender()">âœ¨ è·å–æ¨è</button>
        </div>
        
        <div id="result" class="mt-20" style="white-space: pre-wrap; line-height: 1.6; background: #f9f9f9; padding: 15px; border-radius: 5px; min-height: 100px;"></div>
    </div>

    <script>
        const { ipcRenderer } = require('electron')
        window.ipcRenderer = ipcRenderer
        async function recommender(){
            const area = document.getElementById("area_input").value.trim()
            const resultElement = document.getElementById("result")
            if (!area) {
                resultElement.innerText = "è¯·è¾“å…¥ä½ æ‰€åœ¨çš„åœ°åŒº"
                return
            }
            resultElement.innerText = "æ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆæ¨èï¼Œè¯·ç¨å€™..."
            try {
                const result = await ipcRenderer.invoke('todays_recommend', area)
                resultElement.innerText = result
            } catch (err) {
                resultElement.innerText = `è°ƒç”¨å‡ºé”™ï¼š${err}`
            }
        }
    </script>
</body>
</html>